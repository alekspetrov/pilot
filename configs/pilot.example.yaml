# Pilot Configuration
# Copy this to ~/.pilot/config.yaml and customize

version: "1.0"

# Gateway server settings
gateway:
  host: "127.0.0.1"
  port: 9090

# Authentication
auth:
  type: "claude-code"  # "claude-code" (local) or "api-token" (remote)
  # token: "sk-ant-..."  # Required if type is "api-token"

# Adapters
adapters:
  # Telegram - Chat-based task execution
  telegram:
    enabled: false
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"    # Your user/chat ID for notifications
    transcription:
      provider: openai
      openai_key: "${OPENAI_API_KEY}"  # For voice message transcription

  # GitHub - Issue polling and PR creation
  github:
    enabled: false
    token: "${GITHUB_TOKEN}"
    repo: "owner/repo"                 # Repository to poll
    pilot_label: "pilot"               # Issues with this label are picked up
    polling:
      enabled: true
      interval: 30s
      label: "pilot"

  # Linear - Issue tracking (webhooks)
  linear:
    enabled: false
    api_key: "${LINEAR_API_KEY}"
    team_id: "your-team-id"
    pilot_label: "pilot"    # Issues with this label are picked up
    auto_assign: true        # Auto-assign issues to Pilot

  # Slack - Notifications
  slack:
    enabled: false
    bot_token: "${SLACK_BOT_TOKEN}"
    channel: "#dev-notifications"

# Orchestrator settings
orchestrator:
  model: "claude-sonnet-4-20250514"
  max_concurrent: 2          # Max parallel tasks

  # Execution mode (sequential or parallel)
  execution:
    mode: "sequential"         # sequential: one issue at a time, waits for PR merge
                               # parallel: process multiple issues concurrently (legacy)
    wait_for_merge: true       # Wait for PR merge before picking next issue
    poll_interval: 30s         # How often to check PR status
    pr_timeout: 1h             # Max time to wait for PR merge

# Executor settings
executor:
  type: "claude-code"          # "claude-code" or "opencode"
  auto_create_pr: true         # Create PR by default after task completion
                               # Use --no-pr flag to disable for individual tasks
  # direct_commit: false       # DANGER: Enable direct commit to main (requires --direct-commit flag)
                               # When enabled with flag, skips branches and PRs, pushes directly to main
                               # Intended for users who rely on manual QA instead of code review

# Daily briefs configuration
briefs:
  enabled: false
  schedule: "0 9 * * 1-5"      # Cron: 9 AM weekdays
  timezone: "America/New_York"
  channels:
    # Slack channel
    - type: slack
      channel: "#dev-updates"
    # Telegram chat
    - type: telegram
      channel: "${TELEGRAM_CHAT_ID}"  # Your Telegram chat ID
    # Email recipients
    # - type: email
    #   recipients:
    #     - team@example.com
  content:
    include_metrics: true
    include_errors: true
    max_items_per_section: 10

# Memory settings
memory:
  path: "~/.pilot/data"
  cross_project: true        # Share learnings across projects

# Project configurations
projects:
  # Example project
  - name: "my-app"
    path: "/path/to/my-app"
    navigator: true           # Use Navigator for context efficiency
    default_branch: "main"

# Dashboard settings
dashboard:
  refresh_interval: 1000     # ms
  show_logs: true
