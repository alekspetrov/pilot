{
  "version": "1.0.0",
  "updated": "2026-01-27T12:45:00Z",
  "nodes": {
    "concepts": {
      "pilot-architecture": {
        "label": "Pilot Architecture",
        "description": "Go daemon + Python orchestrator pattern",
        "related": ["gateway", "executor", "orchestrator", "memory"]
      },
      "gateway": {
        "label": "Gateway",
        "description": "WebSocket control plane + HTTP API on :9090",
        "files": ["internal/gateway/server.go", "internal/gateway/router.go"]
      },
      "executor": {
        "label": "Executor",
        "description": "Claude Code process spawner and manager",
        "files": ["internal/executor/runner.go", "internal/executor/git.go"]
      },
      "orchestrator": {
        "label": "Orchestrator",
        "description": "Python bridge for LLM task planning",
        "files": ["internal/orchestrator/bridge.go", "orchestrator/"]
      },
      "claude-code-integration": {
        "label": "Claude Code Integration",
        "description": "Spawns `claude -p <prompt>` with Navigator instructions",
        "files": ["internal/executor/runner.go:174-191"]
      },
      "navigator-integration": {
        "label": "Navigator Integration",
        "description": "Prompt includes 'Start my Navigator session' which triggers: 1) Navigator index load (~2k tokens), 2) WORKFLOW CHECK with complexity detection, 3) Autonomous completion protocol. Navigator handles documentation loading, task workflow, and commit automation.",
        "related": ["executor", "autonomous-completion"],
        "key_concepts": [
          "Session start loads .agent/DEVELOPMENT-README.md",
          "WORKFLOW CHECK determines LOOP/TASK/DIRECT mode",
          "Autonomous completion: commit, archive, close ticket",
          "Loop mode with NAVIGATOR_STATUS blocks and EXIT_SIGNAL",
          "92% token reduction via lazy loading"
        ]
      },
      "terminal-workflow": {
        "label": "Terminal Workflow",
        "description": "Run tasks via CLI without Linear webhooks",
        "related": ["pilot-task-command"]
      },
      "pilot-task-command": {
        "label": "pilot task Command",
        "description": "New command to execute tasks from terminal (replacing pilot test)",
        "status": "planned"
      }
    },
    "tasks": {
      "TASK-01": {
        "title": "Gateway Foundation",
        "status": "completed",
        "concepts": ["gateway", "pilot-architecture"]
      },
      "TASK-02": {
        "title": "Orchestrator Integration",
        "status": "completed",
        "concepts": ["orchestrator", "pilot-architecture"]
      },
      "TASK-03": {
        "title": "Replace pilot test with pilot task",
        "status": "planned",
        "concepts": ["terminal-workflow", "pilot-task-command", "executor"]
      }
    },
    "memories": {
      "mem-001": {
        "type": "decision",
        "summary": "Go for daemon (single binary), Python for AI logic (flexibility)",
        "concepts": ["pilot-architecture"],
        "confidence": 0.95,
        "created": "2026-01-26"
      },
      "mem-002": {
        "type": "pattern",
        "summary": "Executor builds prompt with 'Start my Navigator session' prefix for Claude Code",
        "concepts": ["executor", "navigator-integration", "claude-code-integration"],
        "confidence": 0.95,
        "created": "2026-01-26"
      },
      "mem-003": {
        "type": "decision",
        "summary": "pilot test was dry-run only, replacing with pilot task for real execution",
        "concepts": ["terminal-workflow", "pilot-task-command"],
        "confidence": 0.9,
        "created": "2026-01-26"
      },
      "mem-004": {
        "type": "pitfall",
        "summary": "CRITICAL: Navigator integration in executor prompt is THE CORE VALUE of Pilot. When refactoring BuildPrompt(), ALWAYS preserve 'Start my Navigator session' prefix. This was accidentally removed during 'simplification' - broke the entire system. Pilot without Navigator = just another Claude Code wrapper with no value.",
        "concepts": ["executor", "navigator-integration", "claude-code-integration"],
        "confidence": 1.0,
        "severity": "critical",
        "created": "2026-01-26",
        "incident": "2026-01-26: Refactored buildPrompt to 'simplify', accidentally removed Navigator. User caught it after deployment."
      },
      "mem-005": {
        "type": "pattern",
        "summary": "BuildPrompt checks for .agent/ folder to conditionally add Navigator session start. This auto-detects Navigator-enabled projects.",
        "concepts": ["executor", "navigator-integration"],
        "confidence": 0.95,
        "created": "2026-01-26"
      },
      "mem-006": {
        "type": "pattern",
        "summary": "Navigator prompt should use 'Run until done' to trigger Loop Mode. Navigator then handles WORKFLOW CHECK, phase transitions (RESEARCH→PLAN→IMPL→VERIFY→COMPLETE), and EXIT_SIGNAL for completion.",
        "concepts": ["executor", "navigator-integration"],
        "confidence": 0.95,
        "created": "2026-01-26"
      },
      "mem-007": {
        "type": "learning",
        "summary": "Pilot can detect Navigator progress by parsing: 'Phase:', 'Progress:', 'EXIT_SIGNAL: true', 'Mode: LOOP/TASK'. These appear in Claude Code stdout when Navigator is active.",
        "concepts": ["executor", "navigator-integration"],
        "confidence": 0.9,
        "created": "2026-01-26"
      },
      "mem-008": {
        "type": "pitfall",
        "summary": "Task status drift: Pilot updates individual task files (TASK-XX.md) but NOT DEVELOPMENT-README.md index. Causes confusion where task files show complete but index shows planned. TASK-32 created to auto-sync.",
        "concepts": ["navigator-integration"],
        "confidence": 1.0,
        "severity": "high",
        "created": "2026-01-27",
        "incident": "2026-01-27: TASK-05, TASK-12-16 all showed complete in task files but planned in index."
      },
      "mem-009": {
        "type": "pitfall",
        "summary": "Logging with Info level goes to stdout and breaks CLI UX (banner display). Use Debug level for operational logs in interactive commands like 'pilot telegram'.",
        "concepts": ["pilot-architecture"],
        "confidence": 0.95,
        "created": "2026-01-27",
        "files": ["internal/adapters/telegram/handler.go"]
      },
      "mem-010": {
        "type": "pattern",
        "summary": "For development builds: 'brew uninstall pilot && brew install --HEAD pilot'. The --HEAD flag builds from main branch. Regular 'brew install' uses pinned tag in formula.",
        "concepts": ["pilot-architecture"],
        "confidence": 1.0,
        "created": "2026-01-27"
      }
    }
  },
  "edges": [
    {"from": "executor", "to": "claude-code-integration", "type": "implements"},
    {"from": "claude-code-integration", "to": "navigator-integration", "type": "uses"},
    {"from": "pilot-task-command", "to": "executor", "type": "uses"},
    {"from": "pilot-task-command", "to": "terminal-workflow", "type": "enables"},
    {"from": "TASK-03", "to": "pilot-task-command", "type": "implements"}
  ]
}
